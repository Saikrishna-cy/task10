---
 - hosts: localhost
   tasks:

   - name: name the directory
     shell:
       cmd: pwd
     register: out1

   - name: display out1
     debug:
       msg: "{{ out1 }}"

   - name: list the directory
     shell:
       cmd: ls -lrt
     register: out2

   - name: display out2
     debug:
       msg: "{{ out2 }}"

   - name: build docker image
     shell:
       cmd: docker build -t task12 .

   - name: stop if container is already running
     shell:
       cmd: docker rm -f task12
     ignore_errors: true

   - name: run docker container
     shell:
       cmd: docker run -itd --rm --name task12 -p 7070:80 -v task12:/var/www/html task12


   - name: check url
     uri:
       url: http://localhost:7070
     register: out

   - name: display result
     debug:
        msg: th web page is up and running
     when: out.status == 200
